"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[865],{865:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var r=s(791),o=s(420),i=s(70);const a="MyPost_profile_posts__yylmK",l="MyPost_posts__JEnoF",n="MyPost_posts_form__IhRAv",c="Post_post__dWfXd";var d=s(184);const u=function(e){return(0,d.jsxs)("div",{className:c,children:[(0,d.jsx)("p",{children:e.message}),(0,d.jsx)("span",{children:e.like})," \u2665",(0,d.jsx)("button",{type:"button",children:"Like"})]})};var p=s(134);const f=e=>{const{register:t,handleSubmit:s,reset:r}=(0,p.cI)();return(0,d.jsxs)("form",{onSubmit:s((t=>{e.addPost(t.newPostText),r()})),className:n,children:[(0,d.jsx)("textarea",{...t("newPostText",{required:!0}),placeholder:"Write a post"}),(0,d.jsx)("button",{type:"submit",children:"Send"})]})},x=e=>{let t=[...e.postData].reverse().map((e=>(0,d.jsx)(u,{id:e.id,message:e.message,like:e.like},e.id)));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:a,children:(0,d.jsx)(f,{addPost:e.addPost})}),(0,d.jsx)("div",{className:l,children:t})]})};const h=(0,o.$j)((e=>({postData:e.profilePage.postData,newPostText:e.profilePage.newPostText})),(e=>({addPost:t=>{e((0,i.Wl)(t))}})))(x),j={profile_data:"ProfileInfo_profile_data__UZfki",profile_text:"ProfileInfo_profile_text__4-FvA",input_file:"ProfileInfo_input_file__fT39q",write_status:"ProfileInfo_write_status__jGnlP",status:"ProfileInfo_status__tB7Yh",profile_edit_btn:"ProfileInfo_profile_edit_btn__oM2KV",profile_edit_textarea:"ProfileInfo_profile_edit_textarea__jAxi0",profile_name:"ProfileInfo_profile_name__mZx4L",profile_cancel_btn:"ProfileInfo_profile_cancel_btn__XGenZ"};var _=s(765);const m=e=>{const[t,s]=(0,r.useState)(!1),[o,i]=(0,r.useState)(e.status);(0,r.useEffect)((()=>{i(e.status)}),[e.status]);const{register:a,handleSubmit:l,formState:{errors:n}}=(0,p.cI)();return(0,d.jsx)("div",{children:(0,d.jsxs)("form",{onSubmit:l((e=>{console.log(e)})),children:[!t&&(0,d.jsx)("div",{children:(0,d.jsx)("span",{style:{marginLeft:"5px",cursor:"pointer"},onDoubleClick:()=>{s(!0)},children:e.status||"----"})}),t&&(0,d.jsx)("div",{children:(0,d.jsx)("input",{...a("status"),onChange:e=>{i(e.currentTarget.value)},autoFocus:!0,onBlur:()=>{s(!1),e.updateStatus(o)},type:"text",value:o})})]})})};var v=s(55);const b=s.p+"static/media/writeStatus.3f1c90794b94d7efc720ea3ad7bdcba1.svg",g=e=>{const{register:t,handleSubmit:s,setError:r,formState:{errors:o},clearErrors:i}=(0,p.cI)({defaultValues:e.profile});return(0,d.jsx)("div",{className:j.profile_text,children:(0,d.jsxs)("form",{onSubmit:s((t=>{e.saveProfile(t,r).then((()=>{e.setEditMode(!1)}))})),children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("button",{className:j.profile_cancel_btn,onClick:e.goToViewMode,type:"button",children:[" ","Cancel"]}),(0,d.jsx)("input",{className:j.profile_edit_btn,type:"submit",value:"Save"})]}),(0,d.jsx)("p",{children:(0,d.jsx)("input",{...t("fullName"),type:"text",placeholder:"full name"})}),(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{children:"About me"}),":",(0,d.jsx)("textarea",{className:j.profile_edit_textarea,...t("aboutMe"),placeholder:"tell us about yourselfls"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{children:"Looking for a job"}),":"," ",(0,d.jsx)("input",{...t("lookingForAJob"),type:"checkbox"})," yes"]}),(0,d.jsxs)("p",{children:[" ",(0,d.jsx)("b",{children:"Skills"}),":",(0,d.jsx)("input",{...t("lookingForAJobDescription"),type:"text",placeholder:"your skills"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Contacts"}),":"," ",Object.keys(e.profile.contacts).map((e=>(0,d.jsxs)("div",{children:[" ",e,":"," ",(0,d.jsx)("input",{...t("contacts."+e),placeholder:e,onFocus:()=>i(["contacts."+e,"server"]),type:"text"})]})))]}),o.server&&(0,d.jsx)("div",{style:{color:"red"},children:(0,d.jsx)("span",{children:o.server.message})})]})})};const P=e=>(0,d.jsxs)("div",{className:j.profile_text,children:[e.isOwner&&(0,d.jsx)("div",{children:(0,d.jsx)("button",{className:j.profile_edit_btn,onClick:e.goToEditMode,children:"Edit"})}),(0,d.jsx)("p",{className:j.profile_name,children:e.profile.fullName}),(0,d.jsx)("p",{children:e.profile.aboutMe}),(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{children:"Looking for a job"}),": ",e.profile.lookingForAJob?"Yes":"No"]}),e.profile.lookingForAJob&&(0,d.jsxs)("p",{children:[" ",(0,d.jsx)("b",{children:"Skills"}),": ",e.profile.lookingForAJobDescription]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Contacts"}),":"," ",Object.keys(e.profile.contacts).map((t=>(0,d.jsx)(S,{contactTitle:t,contactValue:e.profile.contacts[t]},t)))]})]}),S=e=>{let{contactTitle:t,contactValue:s}=e;return(0,d.jsxs)("p",{children:[t,": ",s]})},k=function(e){const[t,s]=(0,r.useState)(!1);return e.profile?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:j.profile_data,children:[(0,d.jsx)("img",{className:j.avatar,src:null!=e.profile.photos.large?e.profile.photos.large:v,alt:"avatar"}),e.isOwner&&(0,d.jsxs)("label",{className:j.input_file,children:[(0,d.jsx)("input",{name:"file",type:"file",onChange:t=>{t.target.files.length&&e.savePhoto(t.target.files[0])}}),(0,d.jsx)("span",{children:"Add a file"})]}),(0,d.jsxs)("div",{className:j.write_status,children:[(0,d.jsx)("img",{className:j.status,src:b,alt:"write-status"}),(0,d.jsx)(m,{status:e.status,updateStatus:e.updateStatus})]}),t?(0,d.jsx)(g,{setEditMode:s,goToViewMode:()=>s(!1),saveProfile:e.saveProfile,profile:e.profile}):(0,d.jsx)(P,{goToEditMode:()=>{s(!0)},profile:e.profile,isOwner:e.isOwner})]})}):(0,d.jsx)(_.Z,{})};const y=function(e){return(0,d.jsxs)("div",{children:[(0,d.jsx)(k,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,saveProfile:e.saveProfile}),(0,d.jsx)(h,{})]})};var w=s(689),N=s(291);const I=(0,s(154).qC)((0,o.$j)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth})),{setUserProfile:i.$l,getUserProfile:i.et,getStatus:i.lR,updateStatus:i.Nf,savePhoto:i.Ju,saveProfile:i.Ii}),N.S)((function(e){let{userId:t}=(0,w.UO)();return(0,r.useEffect)((()=>{t||(t=e.authorizedUserId),e.getUserProfile(t),e.getStatus(t)}),[t]),(0,d.jsx)("div",{children:(0,d.jsx)(y,{...e,savePhoto:e.savePhoto,isOwner:!t,profile:e.profile,status:e.status,updateStatus:e.updateStatus,saveProfile:e.saveProfile})})}))},291:(e,t,s)=>{s.d(t,{S:()=>l});s(791);var r=s(689),o=s(420),i=s(184);let a=e=>({isAuth:e.auth.isAuth});const l=e=>(0,o.$j)(a)((t=>t.isAuth?(0,i.jsx)(e,{...t}):(0,i.jsx)(r.Fg,{to:"/login/"})))},55:(e,t,s)=>{e.exports=s.p+"static/media/user.3356af717b858f4a96d4.png"}}]);
//# sourceMappingURL=865.63a9fd46.chunk.js.map